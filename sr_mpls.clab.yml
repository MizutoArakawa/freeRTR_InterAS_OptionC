name: freeRTR_InterAS-OptionC

topology:
  nodes:
    PE_A:
      kind: rare
      image: ghcr.io/rare-freertr/freertr-containerlab:main
      mgmt-ipv4: 172.20.20.2
      binds:
        - startup_configuration/PE_A/rtr-sw.txt:/rtr/rtr-sw.txt
    PE_B:
      kind: rare
      image: ghcr.io/rare-freertr/freertr-containerlab:main
      mgmt-ipv4: 172.20.20.3 
      binds:
        - startup_configuration/PE_B/rtr-sw.txt:/rtr/rtr-sw.txt
    P1:
      kind: rare
      image: ghcr.io/rare-freertr/freertr-containerlab:main
      mgmt-ipv4: 172.20.20.4 
      binds:
        - startup_configuration/P1/rtr-sw.txt:/rtr/rtr-sw.txt
    P2:
      kind: rare
      image: ghcr.io/rare-freertr/freertr-containerlab:main
      mgmt-ipv4: 172.20.20.5
      binds:
        - startup_configuration/P2/rtr-sw.txt:/rtr/rtr-sw.txt
    ASBRR1:
      kind: rare
      image: ghcr.io/rare-freertr/freertr-containerlab:main
      mgmt-ipv4: 172.20.20.6
      binds:
        - startup_configuration/ASBRR1/rtr-sw.txt:/rtr/rtr-sw.txt
    ASBRR2:
      kind: rare
      image: ghcr.io/rare-freertr/freertr-containerlab:main
      mgmt-ipv4: 172.20.20.7
      binds:
        - startup_configuration/ASBRR2/rtr-sw.txt:/rtr/rtr-sw.txt
    eASBRR1:
      kind: rare
      image: ghcr.io/rare-freertr/freertr-containerlab:main
      mgmt-ipv4: 172.20.20.8
      binds:
        - startup_configuration/eASBRR1/rtr-sw.txt:/rtr/rtr-sw.txt
    eASBRR2:
      kind: rare
      image: ghcr.io/rare-freertr/freertr-containerlab:main
      mgmt-ipv4: 172.20.20.9
      binds:
        - startup_configuration/eASBRR2/rtr-sw.txt:/rtr/rtr-sw.txt
    ePE_A:
      kind: rare
      image: ghcr.io/rare-freertr/freertr-containerlab:main
      mgmt-ipv4: 172.20.20.10
      binds:
        - startup_configuration/ePE_A/rtr-sw.txt:/rtr/rtr-sw.txt
    ePE_B:
      kind: rare
      image: ghcr.io/rare-freertr/freertr-containerlab:main
      mgmt-ipv4: 172.20.20.11
      binds:
        - startup_configuration/ePE_B/rtr-sw.txt:/rtr/rtr-sw.txt
    
    #client
    host1_1:
      kind: linux
      image: floui/tiny-net-tools:latest
      binds:
        - startup_configuration/VPC1_1/ifsetup.sh:/root/ifsetup.sh
      exec:
        - /bin/ash -c "chmod +x /root/ifsetup.sh && /root/ifsetup.sh"
    host1_2:
      kind: linux
      image: floui/tiny-net-tools:latest
      binds:
        - startup_configuration/VPC1_2/ifsetup.sh:/root/ifsetup.sh
      exec:
        - /bin/ash -c "chmod +x /root/ifsetup.sh && /root/ifsetup.sh"
    host2_1:
      kind: linux
      image: floui/tiny-net-tools:latest
      binds:
        - startup_configuration/VPC2_1/ifsetup.sh:/root/ifsetup.sh
      exec:
        - /bin/ash -c "chmod +x /root/ifsetup.sh && /root/ifsetup.sh"
    host2_2:
      kind: linux
      image: floui/tiny-net-tools:latest
      binds:
        - startup_configuration/VPC2_2/ifsetup.sh:/root/ifsetup.sh
      exec:
        - /bin/ash -c "chmod +x /root/ifsetup.sh && /root/ifsetup.sh"

  links:
    - endpoints: ["PE_A:eth2","P1:eth1"]
    - endpoints: ["PE_A:eth3","P2:eth1"]
    - endpoints: ["PE_B:eth2","P1:eth2"]
    - endpoints: ["PE_B:eth3","P2:eth2"]
    - endpoints: ["P1:eth3","ASBRR1:eth1"]
    - endpoints: ["P1:eth4","ASBRR2:eth1"]
    - endpoints: ["P2:eth3","ASBRR1:eth2"]
    - endpoints: ["P2:eth4","ASBRR2:eth2"]
    - endpoints: ["ASBRR1:eth3","ASBRR2:eth3"]
    - endpoints: ["ASBRR1:eth4","ASBRR2:eth4"]
    - endpoints: ["ASBRR1:eth5","eASBRR1:eth5"]
    - endpoints: ["ASBRR2:eth5","eASBRR2:eth5"]
    - endpoints: ["eASBRR1:eth3","eASBRR2:eth3"]
    - endpoints: ["eASBRR1:eth4","eASBRR2:eth4"]
    - endpoints: ["eASBRR1:eth1","ePE_A:eth2"]
    - endpoints: ["eASBRR1:eth2","ePE_B:eth2"]
    - endpoints: ["eASBRR2:eth1","ePE_A:eth3"]
    - endpoints: ["eASBRR2:eth2","ePE_B:eth3"]
    - endpoints: ["host1_1:eth1","PE_A:eth1"]
    - endpoints: ["host2_1:eth1","PE_B:eth1"]
    - endpoints: ["host1_2:eth1","ePE_A:eth1"]
    - endpoints: ["host2_2:eth1","ePE_B:eth1"]
